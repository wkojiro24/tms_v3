<% content_for :title, "承認カテゴリ" %>
<% content_for :section_label, "承認管理" %>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="h5 mb-0">カテゴリ一覧</h2>
  <%= link_to "カテゴリ追加", new_admin_workflow_category_path, class: "btn btn-primary btn-sm" %>
</div>

<div class="card card-lift">
  <div class="card-body">
    <% if @workflow_categories.any? %>
      <div class="table-responsive">
        <table class="table table-sm align-middle">
          <thead>
            <tr>
              <th>名称</th>
              <th>説明</th>
              <th>ステップ数</th>
              <th>通知先</th>
              <th>状態</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @workflow_categories.each do |category| %>
              <tr>
                <td><%= link_to category.name, admin_workflow_category_path(category) %></td>
                <td><%= category.description.presence || '-' %></td>
                <td><%= category.stage_templates.count %></td>
                <td><%= category.notification_roles.join(', ').presence || '-' %></td>
                <td><span class="badge <%= category.active? ? 'bg-success' : 'bg-secondary' %>"><%= category.active? ? '有効' : '無効' %></span></td>
                <td class="text-end">
                  <%= link_to "編集", edit_admin_workflow_category_path(category), class: "btn btn-outline-secondary btn-sm" %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <div class="alert alert-info mb-0">カテゴリが登録されていません。</div>
    <% end %>
  </div>
</div>
