<% content_for :title, "指標カテゴリ設定" %>
<% content_for :section_label, "マスタ管理" %>

<div class="row g-4">
  <div class="col-lg-5">
    <div class="card card-lift">
      <div class="card-body">
        <h2 class="h5 mb-3">カテゴリ追加</h2>
        <%= form_with model: [:admin, @category], local: true do |f| %>
          <div class="mb-3">
            <%= f.label :name, "カテゴリ名", class: "form-label" %>
            <%= f.text_field :name, class: "form-control" %>
          </div>
          <div class="mb-3">
            <%= f.label :display_label, "表示ラベル", class: "form-label" %>
            <%= f.text_field :display_label, class: "form-control", placeholder: "固定費、変動費 など" %>
          </div>
          <div class="mb-3">
            <%= f.label :position, "表示順", class: "form-label" %>
            <%= f.number_field :position, class: "form-control", value: @category.position || 0 %>
          </div>
          <%= f.submit "登録", class: "btn btn-primary" %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="col-lg-7">
    <div class="card card-lift">
      <div class="card-body">
        <h2 class="h5 mb-3">カテゴリ一覧</h2>
        <table class="table table-sm align-middle">
          <thead>
            <tr>
              <th>表示ラベル</th>
              <th>項目数</th>
              <th>順番</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @categories.each do |category| %>
              <tr>
                <td><%= category.display_label %></td>
                <td><%= category.items.count %></td>
                <td><%= category.position %></td>
                <td class="text-end">
                  <%= link_to "編集", edit_admin_metric_category_path(category), class: "btn btn-outline-primary btn-sm" %>
                  <%= link_to "削除", admin_metric_category_path(category), method: :delete,
                              data: { confirm: "削除しますか？" }, class: "btn btn-outline-danger btn-sm" %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
